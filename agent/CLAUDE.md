<!--
  AUTO-GENERATED - DO NOT EDIT THIS FILE

  This file is regenerated on server startup by main.py lifespan().

  To modify:
  - Static content: Edit CLAUDE_HEADER.md
  - Command/DB docs: Auto-generated from commands/__init__.py
-->

# Agent Chat Interface

> Claude Agent SDK chat with job pipeline commands.
>
> **Live:** https://justin-job-apps-production.up.railway.app

## Quick Start

```bash
cd agent && uvicorn main:app --reload --port 8000
```

## Docs

- [spec.md](spec.md) - Architecture & API
- [db_setup.md](db_setup.md) - Database schemas
- [commands/COMMANDS.md](commands/COMMANDS.md) - Adding commands

---

## Database Access

**Environment:** Railway PostgreSQL (all tables in one database)

```bash
# Run a query
psql "$DATABASE_URL" -c "SELECT COUNT(*) FROM companies;"

# Interactive session
psql "$DATABASE_URL"
```

**Tables:** sessions, chat_messages, companies, jobs, target_jobs, contacts, messages

**Examples:**
```bash
# Job stats
psql "$DATABASE_URL" -c "SELECT COUNT(*) as total, COUNT(*) FILTER (WHERE evaluated) as evaluated FROM jobs;"

# Pending targets
psql "$DATABASE_URL" -c "SELECT j.job_title, c.name FROM target_jobs t JOIN jobs j ON t.job_id = j.id JOIN companies c ON j.company_id = c.id WHERE t.status = 1;"

# Companies by platform
psql "$DATABASE_URL" -c "SELECT ats_platform, COUNT(*) FROM companies GROUP BY ats_platform;"
```

See [db_setup.md](db_setup.md) for full schema.

---

## Commands

> Auto-generated from command registry. Do not edit manually.

Commands can be triggered via:
1. **Web UI**: Type `/filter 100` in chat
2. **Programmatically**: Use `dispatch()` function

```python
import asyncio
from commands import dispatch

async def run(cmd: str):
    async for event in dispatch(cmd):
        print(f"{event['type']}: {event['text']}")

# Example: asyncio.run(run('/jobs stats'))
```

### Available Commands

### /scrape
Fetch jobs from ATS platforms
```
/scrape ashby | /scrape simplify | /scrape yc | /scrape a16z | /scrape manual | /scrape dork <ats>
```

### /jobs
Manage jobs database
```
/jobs stats | /jobs pending
```

### /filter
AI filter jobs for new grad relevance
```
/filter [limit] | /filter reset
```

### /discover
Find contacts and companies
```
/discover contacts [limit] | /discover dork <platform>
```

